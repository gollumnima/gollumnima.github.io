{"componentChunkName":"component---src-templates-post-template-js","path":"/posts/hooks_1","webpackCompilationHash":"25d9316762a3a654a790","result":{"data":{"markdownRemark":{"id":"11cffa2a-e93e-5927-8327-0db8ad679154","html":"<p><img src=\"https://images.velog.io/images/dooreplay/post/9cfe5154-5219-43bb-950b-41c4cf09e877/image.png\"></p>\n<h2 id=\"usestate\"><a href=\"#usestate\" aria-label=\"usestate permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>useState</h2>\n<p><code class=\"language-text\">useState</code> 는 setState와 비슷함.</p>\n<p><code class=\"language-text\">const [변수, 함수] = useState(초기값)</code> 이런 형식으로 쓴다.</p>\n<p>예시를 보자. 두 개의 버튼이 있는데, 각 버튼을 누를때마다 해당하는 글자가 뜨도록 할거다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const App = () =&gt; {\n  const [resource, setResource] = useState(&quot;posts&quot;);\n  console.log(resource);\n\n  return (\n    &lt;div&gt;\n      &lt;div&gt;\n        &lt;button onClick={() =&gt; setResource(&quot;posts&quot;)}&gt;Posts&lt;/button&gt;\n        &lt;button onClick={() =&gt; setResource(&quot;todos&quot;)}&gt;Todos&lt;/button&gt;\n      &lt;/div&gt;\n      &lt;ResourceList resource={resource} /&gt;\n    &lt;/div&gt;\n  );\n};</code></pre></div>\n<p>resource라는 변수를 정의해주었고, 초기값은 posts로 설정쓰!\nsetResource는 class형 컴포넌트에서의 setState와 같은 역할을 한다고 보면 된다.\nclass형은 constructor부터 시작해서 초기 state랑 setState함수랑.. 쓸게 굉장히 많았는데\n함수형 컴포넌트에서 useState를 이용해 state관리를 하니까 훨씬 코드가 간결해졌다.</p>\n<h2 id=\"useeffect를-써보자\"><a href=\"#useeffect%EB%A5%BC-%EC%8D%A8%EB%B3%B4%EC%9E%90\" aria-label=\"useeffect를 써보자 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>useEffect를 써보자.</h2>\n<p><code class=\"language-text\">useEffect</code>는 컴디마와 컴디업을 섞어놓은 것\n먼저 클래스형의 예시를 보자!</p>\n<p>위에서 만든 todos와 post 버튼을 눌렀을 때 api를 받아오게끔 코드를 짰는데,\n컴디마만 썼을때는 하나의 값만 받는다! 그래서 컴디업도 써줘야 하는데..\n그냥 컴디업만 쓰면 무한랜더링이 돌게 되어서 현재 state의 resource와 다를 때만 적용이 되도록 조건을 하나 넣어주었고\n이렇게 코드가 길어야 해결 가능쓰…</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">  async componentDidMount() {\n    const response = await axios.get(\n      `https://jsonplaceholder.typicode.com/${this.props.resource}`\n    );\n    this.setState({ resources : response.data });\n  }\n\n  async componentDidUpdate(prevProps) {\n    if (prevProps.resource !== this.props.resource) {\n      const response = await axios.get(\n        `https://jsonplaceholder.typicode.com/${this.props.resource}`\n      );\n      this.setState({ resources : response.data });\n    }\n  }</code></pre></div>\n<p>근데 훅스를 쓰면 조금 더 간결해진다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const ResourceList = ({ resource }) =&gt; {\n  const [resources, setResources] = useState([]);\n\n  const fetchResource = async resource =&gt; {\n    const response = await axios.get(\n      `https://jsonplaceholder.typicode.com/${resource}`\n    );\n    setResources(response.data);\n  };\n\n  useEffect(() =&gt; {\n    fetchResource(resource);\n  }, [resource]);\n  return &lt;div&gt;{resources.length}&lt;/div&gt;;\n};</code></pre></div>\n<p>여기서 중요한건 useEffect의 두번째 인자에 꼭 값이 들어가야 한다는 것..!\n두 번째 인자가 없으면 무한으로 api 호출을 한다.</p>\n<p><img src=\"https://images.velog.io/images/dooreplay/post/a425950d-4516-4685-800e-e232aa56f336/image.png\"></p>\n<p>마치 이렇게..!</p>","fields":{"slug":"/posts/hooks_1","tagSlugs":["/tag/web/","/tag/frontend/","/tag/react/"]},"frontmatter":{"date":"2020-02-13T21:46:49.169Z","description":"프로젝트에서 훅스를 안써봤다. 그래서 써본다. 아직 작성중","tags":["web","frontend","react"],"title":"Hooks 공부하기"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/posts/hooks_1"}}}